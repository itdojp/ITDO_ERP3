# Phase2 モジュール計画 (CRM / 販売 / 人事 / BI)

Issue #288 に基づき、Phase2 で優先度が高い 4 モジュールについて要求・設計観点を整理します。各項目はドラフト版であり、仕様レビューで随時更新します。

## 1. CRM モジュール
### 仕様ドラフト
- 顧客マスタ（法人／担当者、タグ、リレーション）
- 案件管理（ステージ、ステータス、予算、関連プロジェクト）
- 会話履歴要約（チャット、メール、商談メモの統合）

### API / GraphQL スキーマ案（要件）
- `Customer`、`Contact`、`Opportunity` オブジェクト
- 検索・フィルタリング（タグ、売上規模、担当者）
- 会話要約取得 API（チャット統合との連携）

### データモデル検討
- RDB: customers / contacts / opportunities / notes
- ベクトル検索: 会話要約 embeddings（pgvector）

### AI ユースケース
- 会話要約・フォローアップ提案
- 顧客ヒートマップ（リスク／成長兆候）

### KPI / ダッシュボード
- 案件パイプライン（ステージ別、予測売上）
- 顧客活性度指標（直近接触、問い合わせ数）

---

## 2. 販売管理モジュール
### 仕様ドラフト
- 見積作成／承認／バージョン管理
- 受注登録、与信チェック、契約発行
- インボイス連携（請求モジュールとの橋渡し）

### API / GraphQL スキーマ案
- `Quote`、`Order`、`CreditReview`
- 受注ステータス遷移 API
- 与信判定結果通知 Webhook

### データモデル検討
- quotes / quote_items / orders / credit_reviews
- 監査ログ（改ざん防止対象）

### AI 支援機能
- 見積テンプレート提案（過去案件の類似検索）
- 与信リスク評価（与信データ + 行動データ）

### KPI / レポート
- 見積→受注転換率
- 与信審査 SLA（平均処理時間）

---

## 3. 人事モジュール
### 仕様ドラフト
- 社員プロフィール／スキルタグ
- 評価サイクル管理（目標、1on1、最終評価）
- スキルマトリクス／アサイン計画

### API / GraphQL スキーマ案
- `Employee`、`SkillTag`、`ReviewCycle`
- スキル付与・評価登録 API

### データモデル検討
- employees / skills / employee_skills / review_cycles
- 評価履歴アーカイブ（電子署名含む）

### AI ユースケース
- 自動スキルタグ推定（履歴・コメントから）
- 評価コメント生成支援

### KPI / 可視化
- スキルカバレッジ、評価完了率
- 配属の需給ギャップ

---

## 4. BI / 分析モジュール
### 仕様ドラフト
- ダッシュボード（プロジェクト、契約、販売、HR 指標統合）
- データマート構成と抽出ライン
- 予測分析 PoC（収益予測、人員需要）

### データ基盤要件
- データレイク / Warehouse 選定
- ETL パイプライン (Airbyte/Fivetran or 自社実装)
- メタデータ管理（カタログ、品質チェック）

### AI 連携
- 自然言語クエリから SQL / ダッシュボード生成
- 異常検知アラート（KPI の逸脱通知）

### スケジュール・リソース
- 事前 PoC：プロジェクト KPI ダッシュボード Migrated（2 週）
- 本実装：ETL → マート構築（4〜6 週）
- AI 連携 PoC：Phase2 後半（LangChain / LangGraph 活用）

---

## 次のステップ
1. 各モジュールの詳細仕様を Issue 化し、担当割り当て
2. モジュールごとに Codex テンプレート整備（Issue #290 と連携）
3. AI ワークフロー設計（Issue #289）と整合性確認
4. KPI / ダッシュボードの優先順位を決定し、BI チームと連携

/cc #288 #159

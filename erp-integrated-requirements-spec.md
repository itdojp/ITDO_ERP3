# モダンERPシステム統合要求仕様書
## Project-Open代替システム

### エグゼクティブサマリー

本仕様書は、既存Project-OpenシステムからモダンなクラウドネイティブERPシステムへの移行を目的とした統合要求仕様書です。レビュー結果に基づき、MVP（Minimum Viable Product）アプローチによる段階的導入を前提とし、日本の法制度対応を含む実装可能な仕様として策定しています。

---

## 第1部：プロジェクト概要

### 1. 背景と目的

#### 1.1 背景
- 現行Project-Openシステムの技術的陳腐化
- 拡張性・保守性の課題
- モバイル対応・リアルタイム処理への要求増大
- 日本の法制度（インボイス制度、労働法規）への対応必要性

#### 1.2 目的
- **短期目標（6-9ヶ月）**
  - コア業務機能のクラウド移行
  - プロジェクト原価管理の精度向上
  - 基本的な契約・請求管理の実現
  
- **中期目標（12-18ヶ月）**
  - 全社統合財務管理の実現
  - ガバナンス・コンプライアンス機能の強化
  - 高度な分析・予測機能の提供

#### 1.3 スコープと優先度（MoSCoW）

##### Must Have（初期MVP - 6ヶ月）
- プロジェクト管理基本機能（WBS、タスク、進捗）
- タイムシート→原価計算→請求の基本フロー
- 契約管理（基本機能）
- 会計システム連携（売掛・買掛）

##### Should Have（フェーズ2 - 12ヶ月）
- 高度な原価計算（標準原価）
- 予算編成・統制
- CRM基本機能
- BIダッシュボード

##### Could Have（フェーズ3 - 18ヶ月）
- 固定資産管理
- 内部統制（SOX/J-SOX対応）
- AI/ML予測分析
- 高度なワークフロー自動化

##### Won't Have（将来検討）
- ABC原価計算
- IFRS16完全対応
- 競合価格分析
- RFIDベース資産管理

---

## 第2部：機能要求仕様

### 2. プロジェクト管理モジュール（PM）

#### 2.1 プロジェクト基本管理

##### 2.1.1 プロジェクト登録・設定

**機能概要**
プロジェクトの基本情報を一元管理し、全社プロジェクトの可視化を実現する。

**必須機能（MVP）**
| 機能ID | 機能名 | 説明 | 優先度 |
|--------|--------|------|--------|
| PM-001 | プロジェクト作成 | 基本情報（名称、期間、予算、PM）の登録 | Must |
| PM-002 | ステータス管理 | 計画/実行/保留/完了/中止の管理 | Must |
| PM-003 | プロジェクトコード | 自動採番・手動設定の両対応 | Must |
| PM-004 | 階層管理 | 親子プロジェクト構造（最大3階層） | Should |
| PM-005 | テンプレート | 標準プロジェクトテンプレート | Should |

**入力項目詳細**
| 項目名 | 必須 | データ型 | 桁数 | 備考 |
|--------|------|----------|------|------|
| プロジェクト名 | ○ | 文字列 | 100 | 日本語対応 |
| プロジェクトコード | ○ | 文字列 | 20 | 自動生成可、重複チェック |
| 開始日 | ○ | 日付 | - | カレンダー選択 |
| 終了日 | ○ | 日付 | - | 開始日以降 |
| 予算額 | ○ | 数値 | 12.2 | 円単位 |
| PM | ○ | 選択 | - | 従業員マスター連携 |
| 顧客 | △ | 選択 | - | 顧客マスター連携 |
| 部門 | ○ | 選択 | - | 組織マスター連携 |

#### 2.2 WBS（Work Breakdown Structure）管理

##### 2.2.1 タスク管理

**機能概要**
プロジェクトの作業を階層的に分解し、進捗・工数を管理する。

**必須機能（MVP）**
| 機能ID | 機能名 | 説明 | 優先度 |
|--------|--------|------|--------|
| PM-010 | WBS作成 | 階層型タスク構造（最大5階層） | Must |
| PM-011 | タスク詳細 | タスク名、期間、担当者、成果物定義 | Must |
| PM-012 | 依存関係 | タスク間の先行・後続関係設定 | Must |
| PM-013 | 進捗管理 | 進捗率入力と自動計算 | Must |
| PM-014 | マイルストーン | 重要節目の設定と管理 | Should |

**タスク属性**
- タスクコード（自動生成）
- タスク名（必須、100文字）
- 計画開始日・終了日
- 実績開始日・終了日
- 計画工数・実績工数
- 進捗率（0-100%）
- 担当者（複数設定可）
- 優先度（高/中/低）
- ステータス（未着手/進行中/完了/中止）

#### 2.3 スケジュール管理

##### 2.3.1 ガントチャート

**機能概要**
プロジェクトスケジュールを視覚的に表示・編集する。

**必須機能（MVP）**
- 対話的なガントチャート表示
- ドラッグ&ドロップによる期間変更
- クリティカルパス表示
- ベースライン比較
- PDF/Excel出力

##### 2.3.2 アジャイル対応

**機能概要**
スクラム・カンバン方式のプロジェクト管理を支援する。

**機能（Should Have）**
- スプリント管理（2-4週間単位）
- バックログ管理
- カンバンボード（ToDo/Doing/Done）
- バーンダウンチャート
- ベロシティ追跡

---

### 3. 財務管理モジュール（FI）

#### 3.1 タイムシート管理 ★MVP必須

##### 3.1.1 工数入力

**機能概要**
プロジェクト原価計算の基礎となる工数データを正確に収集する。

**必須機能（MVP）**
| 機能ID | 機能名 | 説明 | 優先度 |
|--------|--------|------|--------|
| FI-001 | 日次入力 | 日報形式での工数入力 | Must |
| FI-002 | 週次一括入力 | 週単位での一括入力 | Must |
| FI-003 | 承認フロー | 上司承認→PM承認の2段階 | Must |
| FI-004 | 締め処理 | 週次/月次締め処理 | Must |
| FI-005 | モバイル対応 | スマートフォンからの入力 | Should |

**入力項目**
| 項目名 | 必須 | データ型 | 桁数 | 備考 |
|--------|------|----------|------|------|
| 作業日 | ○ | 日付 | - | |
| プロジェクト | ○ | 選択 | - | アクセス権限制御 |
| タスク | ○ | 選択 | - | WBS連携 |
| 作業時間 | ○ | 数値 | 3.2 | 0.25時間単位 |
| 作業内容 | ○ | テキスト | 500 | |
| 勤務区分 | ○ | 選択 | - | 通常/残業/深夜/休日 |

**承認ルール**
- 週次締め後48時間以内に一次承認
- 月次締め3営業日以内に最終承認
- 承認後の修正は理由必須

#### 3.2 プロジェクト原価管理 ★MVP必須

##### 3.2.1 原価計算

**機能概要**
タイムシートデータを基にプロジェクト原価を計算する。

**必須機能（MVP）**
| 機能ID | 機能名 | 説明 | 優先度 |
|--------|--------|------|--------|
| FI-010 | 人件費計算 | 工数×単価による人件費計算 | Must |
| FI-011 | 経費配賦 | プロジェクトへの経費配賦 | Must |
| FI-012 | 原価集計 | プロジェクト別原価集計 | Must |
| FI-013 | 予実比較 | 予算対実績の比較分析 | Must |
| FI-014 | 収益性分析 | プロジェクト収益性レポート | Should |

**原価要素**
- 直接人件費（工数×標準単価）
- 直接経費（交通費、外注費等）
- 間接費配賦（部門共通費の配賦）
- 製造原価・販管費区分

#### 3.3 請求管理 ★MVP必須

##### 3.3.1 請求書発行

**機能概要**
プロジェクト実績に基づく請求書を発行する。

**必須機能（MVP）**
| 機能ID | 機能名 | 説明 | 優先度 |
|--------|--------|------|--------|
| FI-020 | 請求書作成 | 実績ベース/固定額請求書作成 | Must |
| FI-021 | インボイス対応 | 適格請求書発行事業者番号対応 | Must |
| FI-022 | 消費税計算 | 10%/8%/非課税の自動計算 | Must |
| FI-023 | PDF出力 | 電子帳簿保存法対応PDF | Must |
| FI-024 | 請求承認 | 請求書発行承認フロー | Must |

**請求書項目（インボイス制度対応）**
- 適格請求書発行事業者登録番号
- 取引年月日
- 取引内容
- 税率ごとの対価の額
- 消費税額等
- 請求書発行者の氏名又は名称

#### 3.4 予算管理

##### 3.4.1 予算編成（Should Have）

**機能概要**
プロジェクト・部門別の予算を編成・管理する。

**機能要件**
- 年度予算編成
- 四半期予算配賦
- 予算修正・補正
- 予算承認ワークフロー
- 予算消化率モニタリング

##### 3.4.2 予実管理（Should Have）

**機能概要**
予算と実績を比較分析し、差異を管理する。

**機能要件**
- リアルタイム予実比較
- 差異分析レポート
- 予算超過アラート
- 着地予測
- 月次予実会議資料生成

---

### 4. 契約管理モジュール ★MVP必須

#### 4.1 契約ライフサイクル管理

##### 4.1.1 契約基本管理

**機能概要**
契約の作成から終了までのライフサイクルを管理する。

**必須機能（MVP）**
| 機能ID | 機能名 | 説明 | 優先度 |
|--------|--------|------|--------|
| CM-001 | 契約登録 | 契約基本情報の登録 | Must |
| CM-002 | 契約書管理 | 契約書PDF/電子ファイル管理 | Must |
| CM-003 | 更新アラート | 90/60/30日前自動通知 | Must |
| CM-004 | 電子署名連携 | DocuSign/クラウドサイン連携 | Should |
| CM-005 | 契約台帳 | 契約一覧・検索・出力 | Must |

**契約情報項目**
| 項目名 | 必須 | データ型 | 桁数 | 備考 |
|--------|------|----------|------|------|
| 契約番号 | ○ | 文字列 | 20 | 自動採番 |
| 契約名称 | ○ | 文字列 | 200 | |
| 契約相手先 | ○ | 選択 | - | 顧客/仕入先マスター |
| 契約種別 | ○ | 選択 | - | 売買/請負/委任/賃貸借 |
| 契約期間開始 | ○ | 日付 | - | |
| 契約期間終了 | ○ | 日付 | - | |
| 契約金額 | △ | 数値 | 12.2 | |
| 自動更新 | ○ | 選択 | - | 有/無 |
| 更新通知日数 | ○ | 数値 | 3 | デフォルト90日 |

---

### 5. 販売管理モジュール

#### 5.1 受注管理（Should Have）

##### 5.1.1 見積・受注処理

**機能概要**
見積作成から受注確定までのプロセスを管理する。

**機能要件**
- 見積書作成・バージョン管理
- 見積承認ワークフロー
- 受注登録・変更管理
- 納期管理
- 受注ステータス管理

#### 5.2 与信管理（Should Have）

##### 5.2.1 与信チェック

**機能概要**
取引先の与信状況を管理し、債権リスクを低減する。

**機能要件**
- 与信限度額設定
- 自動与信チェック
- 債権年齢分析
- 滞留アラート
- 回収予定管理

---

### 6. ガバナンス・コンプライアンスモジュール

#### 6.1 内部統制（Could Have）

##### 6.1.1 J-SOX対応

**機能概要**
金融商品取引法に基づく内部統制を支援する。

**機能要件（段階的実装）**
- **フェーズ1：基本統制**
  - 承認履歴管理
  - アクセスログ記録
  - 職務分掌設定
  
- **フェーズ2：文書化**
  - 業務プロセス文書化
  - リスクコントロールマトリックス
  - 統制活動記録
  
- **フェーズ3：評価**
  - 統制テスト管理
  - 不備管理
  - 改善計画追跡

#### 6.2 リスク管理（Could Have）

##### 6.2.1 リスクアセスメント

**機能概要**
プロジェクト・事業リスクを評価・管理する。

**機能要件**
- リスク登録・分類
- 影響度×発生確率マトリックス
- リスク対策計画
- リスクオーナー設定
- 定期レビュー管理

---

## 第3部：非機能要求仕様

### 7. システム基盤要件

#### 7.1 パフォーマンス要件

##### 7.1.1 応答時間要件
| 処理種別 | 目標値 | 許容値 | 測定条件 |
|----------|--------|--------|----------|
| 画面遷移 | 1秒以内 | 2秒以内 | 通常負荷時 |
| 検索処理 | 2秒以内 | 3秒以内 | 1万件検索 |
| レポート生成 | 5秒以内 | 10秒以内 | A4 10ページ |
| データ入力 | 0.5秒以内 | 1秒以内 | 単一レコード |
| バッチ処理 | - | 6時間以内 | 日次バッチ |

##### 7.1.2 キャパシティ要件
- 同時接続ユーザー数：500人（初期）→1,000人（将来）
- データ保持期間：トランザクション7年、ログ3年
- ストレージ容量：初期1TB、年間増加率30%想定

#### 7.2 可用性要件

##### 7.2.1 稼働率目標
| システム区分 | 稼働率目標 | 年間停止許容時間 |
|--------------|------------|------------------|
| 本番環境 | 99.9% | 8.76時間 |
| DR環境 | 99.5% | 43.8時間 |
| 開発環境 | 95.0% | 438時間 |

##### 7.2.2 災害復旧要件
- RPO（Recovery Point Objective）：1時間
- RTO（Recovery Time Objective）：4時間
- バックアップ：日次フル、時間差分、3世代保持
- DRサイト：別リージョンでのホットスタンバイ

#### 7.3 セキュリティ要件

##### 7.3.1 認証・認可
**必須要件（MVP）**
- 多要素認証（MFA）
- シングルサインオン（SSO）：SAML 2.0/OAuth 2.0
- ロールベースアクセス制御（RBAC）
- セッションタイムアウト（30分）

##### 7.3.2 データ保護
**必須要件（MVP）**
- 保存データ暗号化：AES-256
- 通信暗号化：TLS 1.3
- データマスキング（個人情報・機密情報）
- 監査ログ（全更新操作記録）

##### 7.3.3 コンプライアンス対応
**日本法制度対応（MVP）**
- 個人情報保護法
- 電子帳簿保存法
- インボイス制度
- 労働基準法（36協定等）

#### 7.4 拡張性要件

##### 7.4.1 スケーラビリティ
- 水平スケーリング（Kubernetes）
- 自動スケーリング（CPU使用率70%閾値）
- マイクロサービス分割可能な設計
- 非同期処理（メッセージキュー）

##### 7.4.2 カスタマイズ性
- カスタムフィールド追加
- ワークフロー設定変更
- レポートカスタマイズ
- API拡張

---

## 第4部：システムアーキテクチャ

### 8. 技術アーキテクチャ

#### 8.1 アプリケーション構成

##### 8.1.1 フロントエンド
- **フレームワーク**：React 18+ / Next.js 14+
- **UIライブラリ**：Material-UI / Ant Design
- **状態管理**：Redux Toolkit / Zustand
- **通信**：Axios / React Query

##### 8.1.2 バックエンド
- **言語**：TypeScript / Node.js 18+
- **フレームワーク**：NestJS / Express
- **API**：REST API / GraphQL（部分的）
- **認証**：Passport.js / Auth0

##### 8.1.3 データベース
- **RDB**：PostgreSQL 15+（メイン）
- **NoSQL**：MongoDB（ドキュメント管理）
- **キャッシュ**：Redis（セッション・キャッシュ）
- **検索**：Elasticsearch（全文検索）

#### 8.2 インフラストラクチャ

##### 8.2.1 クラウド基盤
- **プラットフォーム**：AWS（東京リージョン）
- **コンピュート**：EKS（Kubernetes）
- **ストレージ**：S3（オブジェクト）、EBS（ブロック）
- **データベース**：RDS（PostgreSQL）、DocumentDB
- **ネットワーク**：VPC、CloudFront（CDN）

##### 8.2.2 DevOps/CI/CD
- **ソース管理**：GitHub Enterprise
- **CI/CD**：GitHub Actions
- **IaC**：Terraform
- **監視**：Datadog / CloudWatch
- **ログ**：CloudWatch Logs / ELK Stack

#### 8.3 統合アーキテクチャ

##### 8.3.1 外部システム連携
**会計システム連携（MVP必須）**
- **対象システム**：freee / マネーフォワード
- **連携方式**：REST API
- **連携データ**：仕訳、売掛、買掛、請求
- **同期頻度**：リアルタイム / バッチ（日次）

##### 8.3.2 認証基盤連携
- **IdP連携**：Azure AD / Google Workspace
- **プロトコル**：SAML 2.0 / OpenID Connect
- **プロビジョニング**：SCIM 2.0

---

## 第5部：移行計画

### 9. データ移行戦略

#### 9.1 移行対象データ

##### 9.1.1 優先度別移行データ
**Phase 1（必須）- 3ヶ月**
- マスターデータ（顧客、従業員、組織）
- アクティブプロジェクト
- 未決済契約
- 当年度取引データ

**Phase 2（重要）- 6ヶ月**
- 過去2年分取引データ
- 完了プロジェクト
- ドキュメント・添付ファイル

**Phase 3（任意）- 12ヶ月**
- 5年分アーカイブデータ
- 監査ログ

#### 9.2 移行方式

##### 9.2.1 移行アプローチ
- **Big Bang移行**：マスターデータ、組織データ
- **段階移行**：トランザクションデータ
- **並行稼働**：3ヶ月間の並行運用期間

##### 9.2.2 データ品質保証
- データクレンジング実施
- 移行リハーサル3回以上
- データ突合・検証
- ロールバック計画

---

## 第6部：プロジェクト管理

### 10. 実装ロードマップ

#### 10.1 フェーズ別実装計画

##### Phase 1: MVP実装（0-6ヶ月）
**Q1（1-3ヶ月）**
- 基盤構築（認証、マスター管理）
- プロジェクト管理基本機能
- タイムシート機能

**Q2（4-6ヶ月）**
- 原価計算・請求管理
- 契約管理基本機能
- 会計システム連携

##### Phase 2: 機能拡張（7-12ヶ月）
**Q3（7-9ヶ月）**
- 予算管理機能
- CRM基本機能
- BIダッシュボード

**Q4（10-12ヶ月）**
- 販売管理（受注・与信）
- ワークフロー強化
- モバイルアプリ

##### Phase 3: 高度化（13-18ヶ月）
**Q5-Q6**
- 内部統制機能
- AI/予測分析
- 固定資産管理
- 高度なレポーティング

#### 10.2 体制と役割

##### 10.2.1 プロジェクト体制
| 役割 | 人数 | 責任範囲 |
|------|------|----------|
| プロジェクトマネージャー | 1名 | 全体統括、進捗管理 |
| ビジネスアナリスト | 2名 | 要件定義、業務設計 |
| システムアーキテクト | 1名 | 技術設計、基盤構築 |
| 開発リーダー | 2名 | 開発チーム管理 |
| 開発者 | 6-8名 | 機能開発、テスト |
| インフラエンジニア | 2名 | 基盤構築、運用設計 |
| データ移行担当 | 2名 | データ移行、品質保証 |
| テスター | 2-3名 | テスト設計、実施 |

##### 10.2.2 ステークホルダー
- エグゼクティブスポンサー（役員）
- 業務部門代表者
- IT部門責任者
- 主要ユーザー代表
- 外部監査人（必要に応じて）

#### 10.3 成功指標（KPI）

##### 10.3.1 定量的指標
| 指標 | 目標値 | 測定時期 |
|------|--------|----------|
| システム稼働率 | 99.9% | 本番稼働後 |
| ユーザー満足度 | 80%以上 | 各フェーズ後 |
| 業務効率改善 | 20%以上 | 1年後 |
| 原価計算精度 | 誤差1%以内 | 6ヶ月後 |
| 請求処理時間 | 50%削減 | 6ヶ月後 |

##### 10.3.2 定性的指標
- データの一元管理実現
- リアルタイム経営情報の提供
- 法規制への確実な対応
- ユーザビリティの向上
- 拡張性の確保

---

## 第7部：リスク管理

### 11. 主要リスクと対策

#### 11.1 技術的リスク

| リスク | 影響度 | 発生確率 | 対策 |
|--------|--------|----------|------|
| データ移行失敗 | 高 | 中 | 3回以上のリハーサル、段階移行 |
| パフォーマンス劣化 | 高 | 中 | 性能テスト、段階的ロールアウト |
| セキュリティ侵害 | 高 | 低 | 多層防御、定期監査 |
| 外部連携不具合 | 中 | 中 | 早期検証、フォールバック設計 |

#### 11.2 組織的リスク

| リスク | 影響度 | 発生確率 | 対策 |
|--------|--------|----------|------|
| ユーザー抵抗 | 高 | 高 | 早期巻込み、段階導入、十分な研修 |
| スコープクリープ | 高 | 高 | 変更管理プロセス、MVP明確化 |
| リソース不足 | 中 | 中 | バッファ確保、外部支援 |
| 知識移転不足 | 中 | 低 | ドキュメント化、ナレッジ共有 |

---

## 第8部：運用・保守

### 12. 運用設計

#### 12.1 運用体制

##### 12.1.1 運用チーム構成
- システム運用（24x7監視）：外部委託
- アプリケーション保守：内製2名+外部支援
- ヘルプデスク：内製2名
- データ管理：内製1名

##### 12.1.2 運用プロセス
- インシデント管理（ITIL準拠）
- 変更管理・リリース管理
- 問題管理・ナレッジ管理
- キャパシティ管理

#### 12.2 保守計画

##### 12.2.1 定期保守
- セキュリティパッチ：月次
- アプリケーション更新：四半期
- データベースメンテナンス：月次
- バックアップテスト：四半期

##### 12.2.2 SLA（Service Level Agreement）
| 項目 | 目標値 |
|------|--------|
| 可用性 | 99.9% |
| 障害対応開始 | 30分以内 |
| 障害復旧 | 4時間以内 |
| データ復旧 | 1時間以内のポイント |

---

## 付録

### A. 用語集

| 用語 | 説明 |
|------|------|
| MVP | Minimum Viable Product - 実用最小限の製品 |
| MoSCoW | Must/Should/Could/Won't - 優先度設定手法 |
| RPO | Recovery Point Objective - 目標復旧時点 |
| RTO | Recovery Time Objective - 目標復旧時間 |
| RBAC | Role-Based Access Control - ロールベースアクセス制御 |
| J-SOX | 日本版SOX法 - 内部統制報告制度 |
| インボイス制度 | 適格請求書等保存方式 |

### B. 参考資料

- 現行Project-Openシステム仕様書
- 業界ベストプラクティスガイド
- 日本の法規制要件一覧
- ユーザー要望調査結果

### C. 改訂履歴

| 版数 | 日付 | 改訂内容 | 作成者 |
|------|------|----------|--------|
| 1.0 | 2025-08-23 | 初版作成 - レビュー結果反映、MVP定義、日本法制度対応明記 | 統合版 |

---

*本仕様書は、既存要求仕様書、レビュー結果、および2つの詳細仕様書（PlanO/PlanS）の分析に基づいて作成された統合要求仕様書です。実装にあたっては、各フェーズでの詳細設計と関係者との合意形成が必要です。*